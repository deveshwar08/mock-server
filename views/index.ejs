<%- include('partials/header.ejs') %>
    <div class='container'>
        <div id='panel'>
            <button onclick='createEndPoint()'>Add a new base endpoint</button>
            <button onclick='createModel()'>Add a new schema</button>
            <% if(servers.length > 0){ servers.forEach(server => {%>
                <div class="row">
                    <h5><%- server.servername %></h3>
                    <ul>
                        <% server.endpoints.forEach(endpoint => { %>
                            <li>
                                <p><%- endpoint.type %> </p>
                                <p><%- endpoint.name  %> </p>
                            </li>
                        <% }) %> 
                    </ul>
                </div> 
                <% });}%>
        </div>
        <div id='body'>
            <div class='create-endpoint'>
                <h3>Create End Point</h3>
                <form id='create-endpoint-form'>
                    <div class="form-group">
                        <label for='servername'>Servername: </label>
                        <input type='text' name='servername' class='form-control' required />
                    </div>
                    <div class="form-group">
                        <label for='admin'>Admin: </label>
                        <input type='text' name='admin' value=<%- user.username %> class='form-control' readOnly
                        required/>
                    </div>
                    <div class="form-group">
                        <button type='submit'>Add</button>
                    </div>
                </form>
            </div>
            <div class="create-model">
                <h3>Create Model</h3>
                <button onclick='addOption()'>Add option</button>
                <form id='create-model-form'>
                    <div class="form-group">
                        <button type='submit'>Create</button>
                    </div>
                    <div class="form-group">
                        <label for='modelname'>Model Name: </label>
                        <input type='text' name='modlename' required/>
                    </div>
                    <div class="form-group">
                            <% if(servers.length > 0){%>
                            <label for='servername'>Server name:</label>
                            <select name='servername' required>
                            <% servers.forEach(server => {%> 
                                <option value='<%- server.servername %>'><%-server.servername %></option>
                            <% }); %>
                            </select>
                            <%} else { %>
                                <p class='text-warning'>Create a server first</p>
                            <% } %>  
                    </div>
                    <div class="form-group">
                        <fieldset>
                            <legend>Option</legend>
                            <div class="form-group">
                                <label for='key1'>Key:</label>
                                <input type='text' name='key1' class='form-control' required />
                            </div>
                            <div class="form-group">
                                <label for='type1'>Type:</label>
                                <select name='type1' class='form-control' required>
                                    <option value='String'>String</option>
                                    <option value='Number'>Number</option>
                                </select>
                            </div>
                        </fieldset>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src='fe.js' type='text/javascript'>

    </script>
    <%- include('partials/footer.ejs') %>